@page "/admin/user-management"

@using MudBlazor
@using ScrumMaster.Models

<MudContainer>
    <MudStack Spacing="2" Class="pa-4">
        <MudText Typo="Typo.h4" Color="Color.Primary">User Management</MudText>
        <MudText Typo="Typo.subtitle1">Manage users, roles, and permissions.</MudText>

        <MudIconButton Class="add-btn"
                       Size="Size.Small"
                       Color="Color.Primary"
                       Variant="Variant.Filled"
                       Icon="@Icons.Material.Rounded.Add"
                       OnClick="AddUserAsync" />

        <MudTable Items="@users" Hover="true" Striped="true" Dense="true">
            <HeaderContent>
                <MudTh>User Name</MudTh>
                <MudTh>Email</MudTh>
                <MudTh>Role</MudTh>
                <MudTh>Created At</MudTh>
                <MudTh>Actions</MudTh>
            </HeaderContent>

            <RowTemplate Context="user">
                <MudTd>@user.UserName</MudTd>
                <MudTd>@user.Email</MudTd>
                <MudTd>
                    <MudChip T="string"
                             Color="@(user.Role == UserDetails.TUserRole.Admin ? Color.Secondary : Color.Primary)"
                             Variant="Variant.Filled">
                        @user.Role.ToString()
                    </MudChip>
                </MudTd>
                <MudTd>@user.CreatedAt.ToShortDateString()</MudTd>
                <MudTd>
                    <MudButton Variant="Variant.Text" Color="Color.Primary"
                               OnClick="@(() => EditUserAsync(user))">Edit</MudButton>
                    <MudButton Variant="Variant.Text" Color="Color.Error"
                               OnClick="@(() => DeleteUserAsync(user))">Delete</MudButton>
                </MudTd>
            </RowTemplate>

            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
    </MudStack>
</MudContainer>
