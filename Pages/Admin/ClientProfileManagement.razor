@page "/admin/client-config"

@using MudBlazor
@using ScrumMaster.Models
@using ScrumMaster.Dialog
@using ScrumMaster.Services

<MudContainer>
    <MudStack Spacing="2" Class="pa-4">
        <MudText Typo="Typo.h4" Color="Color.Primary">Client Profiles</MudText>
        <MudText Typo="Typo.subtitle1">Manage client details and settings.</MudText>

        <MudIconButton Class="add-btn"
                       Style="width: 40px;"
                       Size="Size.Small"
                       Color="Color.Primary"
                       Variant="Variant.Filled"
                       Icon="@Icons.Material.Rounded.Add"
                       OnClick="AddClientAsync" />

        <MudTable Items="@clients" Hover="true" Striped="true" Dense="true">
            <HeaderContent>
                <MudTh>Name</MudTh>
                <MudTh>Code</MudTh>
                <MudTh>Active</MudTh>
                <MudTh>Default Team Size</MudTh>
                <MudTh>Notes</MudTh>
                <MudTh></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Name">@context.Name</MudTd>
                <MudTd DataLabel="Code">@context.Code</MudTd>
                <MudTd DataLabel="Active">
                    <MudChip T="string"
                             Color="@(@context.IsActive ? Color.Success : Color.Error)"
                             Variant="Variant.Filled">
                        @(@context.IsActive ? "Yes" : "No")
                    </MudChip>
                </MudTd>
                <MudTd DataLabel="Notes">@context.Notes</MudTd>
                <MudTd DataLabel="Actions">
                    <MudButton Variant="Variant.Text" Color="Color.Primary"
                               OnClick="@(() => EditClientAsync(context))">Edit</MudButton>
                    <MudButton Variant="Variant.Text" Color="Color.Error"
                               OnClick="@(() => DeleteClientAsync(context))">Delete</MudButton>
                </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
    </MudStack>
</MudContainer>
