@using Microsoft.AspNetCore.Components.Forms
@using MudBlazor
@using ScrumMaster.Models
@using static ScrumMaster.Models.UserDetails

<!-- EditForm binds to user model and triggers OnValidSubmitAsync on form submit -->
<EditForm Model="@User" OnValidSubmit="OnValidSubmitAsync">
    <!-- Enables validation using data annotations in user model -->
    <DataAnnotationsValidator />

    <!-- Main dialog container for the user form -->
    <MudDialog Style="width:450px;" Title="@DialogTitle">
        <DialogContent>

            <!-- User Name field (required) -->
            <MudTextField T="string"
                          @bind-Value="User.UserName"
                          Label="User Name"
                          Required
                          For="@(() => User.UserName)" />
           
            @if(User.Id == 0)
            {
                <!-- Password field (required) -->
                <MudTextField T="string"
                @bind-Value="User.Password"
                Label="Password"
                InputType="InputType.Password"
                Required
                For="@(() => User.Password)" />
            }

            <!-- Email field (required) -->
            <MudTextField T="string"
                          @bind-Value="User.Email"
                          Label="Email"
                          Required
                          For="@(() => User.Email)" />

            <!-- User role dropdown (Admin/User) -->
            <MudSelect T="TUserRole"
                       @bind-Value="User.Role"
                       Label="Role"
                       Required
                       For="@(() => User.Role)">
                <!-- Role options -->
                <MudSelectItem Value="TUserRole.Admin">Admin</MudSelectItem>
                <MudSelectItem Value="TUserRole.User">User</MudSelectItem>
            </MudSelect>
        </DialogContent>

        <DialogActions>
            <!-- Cancel button closes dialog without saving -->
            <MudButton Color="Color.Primary"
                       Variant="Variant.Filled"
                       OnClick="Cancel">
                Cancel
            </MudButton>

            <!-- Save button submits form and triggers OnValidSubmitAsync -->
            <MudButton Color="Color.Primary"
                       Variant="Variant.Filled"
                       ButtonType="ButtonType.Submit">
                Save
            </MudButton>
        </DialogActions>
    </MudDialog>
</EditForm>
